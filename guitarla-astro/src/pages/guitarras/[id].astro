---
import Layout from "../../layouts/Layout.astro"

export async function getStaticPaths() {
    const url = `${import.meta.env.PUBLIC_API_URL}/guitarras?populate=imagen`
    const respuesta = await fetch(url)
    const {data} = await respuesta.json()
    return data.map(guitarra => ({
        params: {
            id: guitarra.attributes.url
        }, 
        props: {
            guitarra: guitarra.attributes
        }
    }))
}

const {nombre, imagen, description, precio} = Astro.props.guitarra
---
<Layout title={nombre} description="Pagina de tienda de instrumentos musicales, guitarras, cursos, blog y mas">
    <main class="guitarra">
        <img src={imagen.data.attributes.url} alt={`Imagen guitarra ${nombre}`} />

        <div class="contenido">
            <h3>{nombre}</h3>
            <p class="descripcion">{description[0].children[0].text}</p>
            <p class="precio">${precio}</p>

            <form class="formulario">
                <label for="cantidad">Cantidad:</label>
                <select id="cantidad">
                    <option value="0">-- Seleccione --</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </form>
        </div>
    </main>
</Layout>